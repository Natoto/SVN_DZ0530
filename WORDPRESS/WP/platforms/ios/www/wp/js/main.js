window.onload=function(){setTimeout(function(){window.scrollTo(0,1);},0);};function PostPage(self,tid,page,cid,container,inputval){var sid=tid.slice(3);var taget_obj=$("#"+tid);container=container||taget_obj;$.get("../dedewap/plus/listpage_ajax.php?tid="+sid+"&page="+page+"&cid="+cid+"&keyword="+inputval,function(data){if(data){var text=container.html();container.html("");container.html(text+data);self.refresh();}else{!$(self.wrapper).find(".nothing").length&&$(self.wrapper).append('<div  class="nothing" style="position: absolute;width: 100%;bottom: 0px;z-index: 1009;left: 0;text-align: center;font-size: 14px;padding-bottom: 10px;">ÒÑ¾­µ½×îºóÒ»Ò³</div>');}
$(".loadingDiv").hide();});DedeXHTTP=null;}
function scrollbar(options,setting){var curIndex=0,myScroll,interval,$this=this;if(!(this instanceof scrollbar))return new scrollbar(options,setting);setWidth=function(imgNum,w){w=w||0;$(options.scroller).width(imgNum*w);$("li",$(options.wrapper)).width(w);};init=function(){var str="";for(var i=0;i<options.imgNum;i++){str+=i==0?'<span class="on"></span>':"<span></span>";}
$('<div class="btns mt10"></div>').append(str).appendTo(options.wrapper);$(".btns span",options.wrapper).on("click",function(){});};this.getScroller=function(){init();setting=setting||{};setWidth(options.imgNum,options.w);myScroll=new IScroll(options.wrapper,setting);return myScroll;};this.autoPlay=function(){interval=setInterval(move,3e3);};$(options.wrapper).on("touchstart",function(){clearInterval(interval);}).on("touchend",function(){$this.autoPlay();});function move(){curIndex++;if(curIndex>=options.imgNum)curIndex=0;else if(curIndex<0)curIndex=options.imgNum-1;var x=-curIndex*options.w;myScroll.scrollTo(x,0,1e3);}
this.autoPlay();}
function addEvent(scrollbar,events,func){if(!scrollbar)return false;scrollbar.on(events,func);}
$(function(){$(".menu_icon").click(function(){var w=$(window).width()*.8,scrollTop=document.body.scrollTop;$("#content").imove(w,0,300);$("#leftMenu").css("marginTop",scrollTop);if(!$("#layer").length){createLayer(scrollTop);}else{$("#layer").show();$("#layer").css("top",scrollTop+"px");}
setTimeout(function(){leftscroll.refresh();},300);return false;});$("#content").click(function(e){var target=e.target;$("#layer").hide();$("#content").imove(0,0,300,function(){if($("#leftMenu").css("marginTop")&&$("#leftMenu").css("marginTop").replace("px","")!=0){$("#leftMenu").css("marginTop",0);}});setTimeout(function(){leftscroll.scrollTo(0,0);},300);document.getElementById("content").style.webkitTransform="";});function createLayer(top){var dom='<div id="layer" style="position:absolute;left:0;z-index:99;width:100%;top:'+top+"px;height:"+getScreenSize().height+'px;background:rgba(0,0,0,.5);"/>';$(dom).appendTo("#content");$("#layer").on("touchstart",function(e){if(e&&e.preventDefault)e.preventDefault();else window.event.returnValue=false;$("#content").trigger("click");return false;});}
function getScrollers(wrapper,options){var scroll;scroll=new IScroll(wrapper,options);return scroll;}
var leftscroll=function(){if($("#leftMenu").length>0){var screen_height=$(window).height(),scroller;$("#leftMenu").height(screen_height+50);scroller=getScrollers("#leftMenu",{scrollX:false,scrollY:true,preventDefault:true,preventDefaultException:{tagName:/^(A|DIV|INPUT|TEXTAREA|BUTTON|SELECT)$/}});return scroller;}}();function getScreenSize(){var screen={};screen.width=$(window).width();screen.height=$(window).height();return screen;}
$(".scroller,.aList").length>0&&function(){var screenW=$(window).width(),screenH=$(window).height();function ScrollBar(scrollWrap,options){scrollWrap=scrollWrap&&(scrollWrap[0]?$(scrollWrap):scrollWrap);var innerdiv=scrollWrap.children().eq(0),submodule=innerdiv.children(),parent=this,tostring=Object.prototype.toString;this.scrollers=[];if(options.scrollX){width=screenW*submodule.length;innerdiv.width(width);submodule.each(function(obj){$(this).width(screenW);});}
if(options.scrollY){scrollWrap.height(screenH);}
this.setWidth=function(w){innerdiv.width(w);};this.setHeight=function(h){if(tostring.call(scrollWrap)==="[object Array]"){scrollWrap.each(function(index){$(this).height(h);parent.scrollers[index].refresh();});}else scrollWrap.height(h);};if(tostring.call(scrollWrap)==="[object Array]"){scrollWrap.each(function(index){parent.scrollers[index]=new IScroll(this,options);});}else this.scrollers[0]=new IScroll(scrollWrap[0],options);this.setAction=function(eventType,index,func){if(!this.scrollers.length)return;if(typeof func==="function")this.scrollers[index].on(eventType,func);};}
listPageScroll=new ScrollBar(".scroller",{scrollX:true,scrollY:false,snap:true,click:true});listHorizenScroll=new ScrollBar(".aList",{scrollX:false,scrollY:true,click:true});if($("#articleList").length)listHorizenScroll.setHeight(screenH-40);else listHorizenScroll.setHeight(screenH-93);listPageScroll.setAction("scrollEnd",0,function(){var curPage=Math.ceil(-this.x/$(window).width());$("#tab_head span").removeClass("on");$("#tab_head span").eq(curPage).addClass("on");});var i;for(i=0,j=$(".aList").length;i<j;i++){listHorizenScroll.setAction("scrollEnd",i,function(){var myself=this;if(this.maxScrollY&&this.y<=this.maxScrollY){var cid=$(this.wrapper).attr("id");var id=$(this.scroller).attr("id");var curNo=$(".list_item",$(this.scroller)).length;var type=cid=="newest"?1:2;var page=Math.ceil(curNo/10)+1;var action=$(this.wrapper).parent(".tab_body").data("action");if($("#articleList").length){var url=address+"/status.php?action=topiclist&ostype=-1"+"&page="+page+"&cat_id="+cat_id+"&pageSize=10&type=";getHomeArticle(1,url,page,"topiclist",function(){},$("#articleList2").children(),1);}else{var url=address+"/status.php?action="+action+"&ostype=-1"+"&page="+page+"&pageSize=10&type="+type;getHomeArticle(type,url,page,action,function(){},$("#"+cid).children(),1);}
$(".loadingDiv").show();}
$(".toTopIcon").length&&!$(".toTopIcon").data("bind")&&$(".toTopIcon").click(function(){$(this).data("bind","1");myself.scrollTo(0,0,300);});});}
$("#tab_head span").click(function(){var cur=$(this).index();listPageScroll.scrollers[0].goToPage(cur,0,100);$("#tab_head span").removeClass("on");$("#tab_head span").eq(cur).addClass("on");});}();});